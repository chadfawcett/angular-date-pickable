function jbDatePickableDirective(){function t(t){function e(){D.visibleDates=[moment(D.visibleDate.toDate())];for(var t=1;t<D.visibleMonths;t++)D.visibleDates.push(moment(D.visibleDate.toDate()).add(t,"month").startOf("month"))}function a(){D.visibleDate=D.visibleDate.add(-1,"month").startOf("month"),e()}function n(){D.visibleDate=D.visibleDate.add(1,"month").startOf("month"),e()}function s(t){var e=t.clone().startOf("month"),a=t.clone().endOf("month"),n=e.format("YYYY-MM");if(o[n])return o[n];var s=moment().range(e.startOf("week"),a.endOf("week")),l=[];return s.by("weeks",function(t){var e=[];moment().range(t.clone().startOf("week"),t.clone().endOf("week")).by("days",function(t){e.push(t.startOf("day").toDate())}),l.push(e)}),o[n]=l,l}function l(t){return D.selectStartDate&&D.selectEndDate&&(D.selectEndDate=null,D.selectStartDate=null,D.selectedDateRange=null),D.selectStartDate||D.selectEndDate?D.selectStartDate&&moment(t).isBefore(D.selectStartDate)?(D.selectEndDate=D.selectStartDate,D.selectStartDate=t,D.selectedDate=t,void c()):D.selectStartDate&&moment(t).isAfter(D.selectStartDate)?(D.selectEndDate=t,void c()):void 0:(D.selectStartDate=t,void(D.selectedDate=t))}function c(){D.selectStartDate&&D.selectEndDate&&(D.selectedDateRange=moment().range(moment(D.selectStartDate).startOf("day"),moment(D.selectEndDate).endOf("day")),D.startDate!==D.selectStartDate&&(D.startDate=D.selectStartDate),D.endDate!==D.selectEndDate&&(D.endDate=D.selectEndDate))}function r(t){if(!D.selectedDateRange)return!1;var e=!1,e=D.selectedDateRange.contains(t);return e}function i(t){return D.selectStartDate&&moment(D.selectStartDate).isSame(t,"day")?!0:D.selectEndDate&&moment(D.selectEndDate).isSame(t,"day")?!0:!1}var D=this;D.visibleDate=moment().startOf("month"),D.selectStartDate=moment(D.startDate).toDate(),D.selectEndDate=moment(D.endDate).toDate(),D.setPrevMonth=a,D.setNextMonth=n,D.selectDate=l,D.generateWeeks=s,D.isInRange=r,D.isSelected=i,D.visibleMonths=2,e(),c(D.startDate,D.endDate);var o={},d=_.debounce(function(){e(),c()},100);t.$watch("vm.startDate",function(t,e){t!==e&&t!==D.selectStartDate&&(D.visibleDate=moment(D.startDate).startOf("month"),D.selectStartDate=D.startDate,d())}),t.$watch("vm.endDate",function(t,e){t!==e&&t!==D.selectEndDate&&(D.visibleDate=moment(D.endDate).startOf("month"),D.selectEndDate=D.endDate,d())})}return{restrict:"E",templateUrl:"angular-date-pickable.html",scope:{startDate:"=",endDate:"=",selectedDate:"=",selectedDateRange:"="},controllerAs:"vm",controller:t,bindToController:!0}}angular.module("jbDatePickable",[]).directive("jbDatePickable",jbDatePickableDirective),angular.module("jbDatePickable").run(["$templateCache",function(t){t.put("angular-date-pickable.html",'<table ng-repeat="visibleDate in vm.visibleDates" class="pickable__calendar">\n  <thead>\n    <tr>\n      <th colspan="2" ng-click="vm.setPrevMonth()">&lt;</th>\n      <th colspan="3">{{ visibleDate.toDate() | date:\'MMM yyyy\'}}</th>\n      <th colspan="2" ng-click="vm.setNextMonth()">&gt;</th>\n    </tr>\n\n    <tr>\n      <th>Su</th>\n      <th>Mo</th>\n      <th>Tu</th>\n      <th>We</th>\n      <th>Th</th>\n      <th>Fr</th>\n      <th>Sa</th>\n    </tr>\n  </thead>\n\n  <tbody>\n    <tr ng-repeat="week in vm.generateWeeks(visibleDate)">\n      <td ng-repeat="day in week" ng-click="vm.selectDate(day)" \n        ng-class="{\'pickable__day--in-range\': vm.isInRange(day), \'pickable__day--selected\': vm.isSelected(day) }">\n        {{ day | date:\'dd\' }}\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]);