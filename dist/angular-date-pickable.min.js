function jbDatePickableDirective(){function t(t){function e(){o.visibleDates=[moment(o.visibleDate.toDate())];for(var t=1;t<o.visibleMonths;t++)o.visibleDates.push(moment(o.visibleDate.toDate()).add(t,"month").startOf("month"))}function a(){o.visibleDate=o.visibleDate.add(-1,"month").startOf("month"),e()}function n(){o.visibleDate=o.visibleDate.add(1,"month").startOf("month"),e()}function s(t){var e=t.clone().startOf("month"),a=t.clone().endOf("month"),n=e.format("YYYY-MM");if(d[n])return d[n];var s=moment().range(e.startOf("week"),a.endOf("week")),l=[];return s.by("weeks",function(t){var e=[];moment().range(t.clone().startOf("week"),t.clone().endOf("week")).by("days",function(t){e.push(t.startOf("day").toDate())}),l.push(e)}),d[n]=l,l}function l(t){return o.selectStartDate&&o.selectEndDate&&(o.selectEndDate=null,o.selectStartDate=null,o.selectedDateRange=null),o.selectStartDate||o.selectEndDate?o.selectStartDate&&moment(t).isBefore(o.selectStartDate)?(o.selectEndDate=o.selectStartDate,o.selectStartDate=t,o.selectedDate=t,void c()):o.selectStartDate&&moment(t).isAfter(o.selectStartDate)?(o.selectEndDate=t,void c()):void 0:(o.selectStartDate=t,void(o.selectedDate=t))}function c(){o.selectStartDate&&o.selectEndDate&&(o.selectedDateRange=moment().range(moment(o.selectStartDate).startOf("day"),moment(o.selectEndDate).endOf("day")),o.startDate!==o.selectStartDate&&(o.startDate=o.selectStartDate),o.endDate!==o.selectEndDate&&(o.endDate=o.selectEndDate))}function r(t){if(!o.selectedDateRange)return!1;var e=!1,e=o.selectedDateRange.contains(t);return e}function i(t){return o.selectStartDate&&moment(o.selectStartDate).isSame(t,"day")?!0:o.selectEndDate&&moment(o.selectEndDate).isSame(t,"day")?!0:!1}var o=this;const D=1;o.visibleDate=moment().startOf("month"),o.selectStartDate=moment(o.startDate).toDate(),o.selectEndDate=moment(o.endDate).toDate(),o.setPrevMonth=a,o.setNextMonth=n,o.selectDate=l,o.generateWeeks=s,o.isInRange=r,o.isSelected=i,o.visibleMonths=o.visibleMonths||D,e(),c(o.startDate,o.endDate);var d={},m=_.debounce(function(){e(),c()},100);t.$watch("vm.startDate",function(t,e){t!==e&&t!==o.selectStartDate&&(o.visibleDate=moment(o.startDate).startOf("month"),o.selectStartDate=o.startDate,m())}),t.$watch("vm.endDate",function(t,e){t!==e&&t!==o.selectEndDate&&(o.visibleDate=moment(o.endDate).startOf("month"),o.selectEndDate=o.endDate,m())})}return{restrict:"E",templateUrl:"angular-date-pickable.html",scope:{startDate:"=",endDate:"=",selectedDate:"=",selectedDateRange:"=",visibleMonths:"="},controllerAs:"vm",controller:t,bindToController:!0}}angular.module("jbDatePickable",[]).directive("jbDatePickable",jbDatePickableDirective),angular.module("jbDatePickable").run(["$templateCache",function(t){t.put("angular-date-pickable.html",'<table ng-repeat="visibleDate in vm.visibleDates" class="pickable__calendar">\n  <thead>\n    <tr>\n      <th colspan="2" ng-click="vm.setPrevMonth()">&lt;</th>\n      <th colspan="3">{{ visibleDate.toDate() | date:\'MMM yyyy\'}}</th>\n      <th colspan="2" ng-click="vm.setNextMonth()">&gt;</th>\n    </tr>\n\n    <tr>\n      <th>Su</th>\n      <th>Mo</th>\n      <th>Tu</th>\n      <th>We</th>\n      <th>Th</th>\n      <th>Fr</th>\n      <th>Sa</th>\n    </tr>\n  </thead>\n\n  <tbody>\n    <tr ng-repeat="week in vm.generateWeeks(visibleDate)">\n      <td ng-repeat="day in week" ng-click="vm.selectDate(day)" \n        ng-class="{\'pickable__day--in-range\': vm.isInRange(day), \'pickable__day--selected\': vm.isSelected(day) }">\n        {{ day | date:\'dd\' }}\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]);